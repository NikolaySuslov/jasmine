'From Squeak3.6 of ''6 October 2003'' [latest update: #5429] on 6 February 2004 at 11:19:53 pm'!IndentingListItemMorph subclass: #IndentingListItemMorphWithIcon	instanceVariableNames: ''	classVariableNames: ''	poolDictionaries: ''	category: 'Tools-Explorer'!ListItemWrapper subclass: #ModuleWrapperWithIcon	instanceVariableNames: 'icon '	classVariableNames: ''	poolDictionaries: ''	category: 'Tools-Explorer'!!ModuleWrapperWithIcon commentStamp: '<historical>'!I am a ListItemWrapper for use in a Module Explorer. I know about various icons.!ModuleWrapperWithIcon class	instanceVariableNames: 'iconCache '!SimpleHierarchicalListMorph subclass: #SimpleHierarchicalListMorphWithIcon	instanceVariableNames: ''	classVariableNames: ''	poolDictionaries: ''	category: 'Tools-Explorer'!!SimpleHierarchicalListMorphWithIcon commentStamp: '<historical>'!I am a SimpleHierarchicalListMorph that uses IndentingListItemMorphWithIcon morphsfor drawing.!!ModuleWrapperWithIcon methodsFor: 'accessing' stamp: 'nk 7/10/2002 10:16'!icon: aForm	icon _ aForm! !!ModuleWrapperWithIcon methodsFor: 'accessing' stamp: 'nk 7/10/2002 10:21'!icon	^icon ifNil: [ self class moduleIcon ]! !!ModuleWrapperWithIcon class methodsFor: 'class initialization' stamp: 'nk 7/10/2002 12:01'!initialize	iconCache _ IdentityDictionary new.! !!ModuleWrapperWithIcon class methodsFor: 'icons' stamp: 'nk 7/10/2002 12:03'!moduleIcon	^iconCache at: #module ifAbsentPut: [ ((ColorForm	extent: 11@11	depth: 2	fromArray: #( 0 356864000 356864000 356864000 356864000 0 356864000 356864000 356864000 356864000 0)	offset: 0@0)	colorsFromArray: #(#(0.0 0.0 0.0) #(0.0 1.0 1.0) #( ) #(1.0 1.0 1.0)  ))]! !!ModuleWrapperWithIcon class methodsFor: 'icons' stamp: 'nk 7/10/2002 12:03'!moduleRefIcon	^iconCache at: #moduleRef ifAbsentPut: [ ((ColorForm	extent: 13@11	depth: 4	fromArray: #( 1140850688 0 1140924704 555810816 855773712 303169536 825434400 555810816 823210768 303169536 823202096 0 823210784 303169536 825430544 555810816 855712032 303169536 1140986384 555810816 1140850688 0)	offset: 0@0)	colorsFromArray: #(#(0.501 0.501 0.501) #(1.0 1.0 1.0) #(0.0 1.0 1.0) #(0.0 0.0 0.0) #( ) #(1.0 1.0 1.0) #(1.0 1.0 1.0) #(1.0 1.0 1.0) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( )  ))]! !!ModuleWrapperWithIcon class methodsFor: 'icons' stamp: 'nk 7/10/2002 12:01'!categoryIcon	^iconCache at: #category ifAbsentPut: [ ((ColorForm	extent: 11@11	depth: 2	fromArray: #( 2862622720 2860861440 2685751296 2235912192 352407552 341067776 290793472 2169841664 2706712576 2824120320 2852300800)	offset: 0@0)	colorsFromArray: #(#(0.0 0.0 0.0) #(0.0 1.0 0.0) #( ) #(1.0 1.0 1.0)  ))]! !!ModuleWrapperWithIcon class methodsFor: 'icons' stamp: 'nk 7/10/2002 12:03'!methodRefIcon	^iconCache at: #methodRef ifAbsentPut: [ ((ColorForm	extent: 13@9	depth: 4	fromArray: #( 1145324544 278528 289685539 589316096 303104562 842137600 304222499 589496320 304226834 842137600 304222499 589496320 303104562 842137600 289685539 589316096 1145324544 278528)	offset: 0@0)	colorsFromArray: #(#(0.501 0.501 0.501) #(0.0 0.0 0.0) #(1.0 1.0 1.0) #(1.0 1.0 0.0) #( ) #(1.0 1.0 1.0) #(1.0 1.0 1.0) #(1.0 1.0 1.0) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( )  ))]! !!ModuleWrapperWithIcon class methodsFor: 'icons' stamp: 'nk 7/10/2002 09:55'!iconSize	^14@11! !!ModuleWrapperWithIcon class methodsFor: 'icons' stamp: 'nk 7/10/2002 12:02'!classIcon	^iconCache at: #class ifAbsentPut: [ ((ColorForm	extent: 9@9	depth: 2	fromArray: #( 0 357892096 357892096 357892096 357892096 357892096 357892096 357892096 0)	offset: 0@0)	colorsFromArray: #(#(0.0 0.0 0.0) #(1.0 0.0 1.0) #( ) #(1.0 1.0 1.0)  ))]! !!ModuleWrapperWithIcon class methodsFor: 'icons' stamp: 'nk 7/10/2002 12:01'!categoryRefIcon	^ iconCache at: #categoryRef ifAbsentPut: [ ((ColorForm	extent: 14@11	depth: 4	fromArray: #( 1145324612 1073759232 1145324612 18940928 860110848 303173632 825426209 555819008 823210768 1183744 823202097 553714688 823210770 303055872 825425953 555762688 860110866 303055872 1145324545 553927680 1145324608 4473856)	offset: 0@0)	colorsFromArray: #(#(0.501 0.501 0.501) #(1.0 1.0 1.0) #(0.0 1.0 0.0) #(0.0 0.0 0.0) #( ) #(1.0 1.0 1.0) #(1.0 1.0 1.0) #(1.0 1.0 1.0) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( )  ))]! !!ModuleWrapperWithIcon class methodsFor: 'icons' stamp: 'nk 7/10/2002 12:02'!classRefIcon	^iconCache at: #classRef ifAbsentPut: [ ((ColorForm	extent: 12@9	depth: 4	fromArray: #( 1145044992 0 289415971 589299712 319894066 842006528 322113827 589299712 322122514 842006528 322113827 589299712 319894066 842006528 289415971 589299712 1145044992 0)	offset: 0@0)	colorsFromArray: #(#(0.501 0.501 0.501) #(0.0 0.0 0.0) #(1.0 0.0 1.0) #(1.0 1.0 1.0) #( ) #(1.0 1.0 1.0) #(1.0 1.0 1.0) #(1.0 1.0 1.0) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( )  ))]! !!ModuleWrapperWithIcon class methodsFor: 'icons' stamp: 'nk 7/10/2002 12:02'!methodIcon	^iconCache at: #method ifAbsentPut: [ ((ColorForm	extent: 9@9	depth: 2	fromArray: #( 2684518400 2236907520 357892096 357892096 357892096 357892096 357892096 2236907520 2684518400)	offset: 0@0)	colorsFromArray: #(#(0.0 0.0 0.0) #(1.0 1.0 0.0) #( ) #(1.0 1.0 1.0)  ))]! !!IndentingListItemMorphWithIcon methodsFor: 'drawing' stamp: 'nk 7/10/2002 11:57'!toggleRectangle	^super toggleRectangle extendBy: (complexContents iconSize x + 4) @ 0! !!IndentingListItemMorphWithIcon methodsFor: 'drawing' stamp: 'ar 9/7/2002 19:21'!drawOn: aCanvas	super drawOn: aCanvas.	complexContents ifNotNil: [ | icon rect iconLeft yOffset |		"center the icon vertically"		icon _ complexContents icon.		rect _ self toggleRectangle.		iconLeft _ rect right - icon extent x - 2.		yOffset _ (rect height - icon extent y) // 2.		aCanvas paintImage: icon at: (iconLeft @ (rect top + yOffset)).	]! !!SimpleHierarchicalListMorphWithIcon methodsFor: 'initialization' stamp: 'nk 7/10/2002 08:35'!indentingItemClass		^IndentingListItemMorphWithIcon! !!IndentingListItemMorph methodsFor: 'drawing' stamp: 'nk 7/10/2002 11:56'!drawToggleOn: aCanvas in: aRectangle	| aForm centeringOffset |	complexContents hasContents ifFalse: [^self].	"aCanvas frameRectangle: aRectangle color: Color blue."	aForm _ isExpanded 		ifTrue: [container expandedForm]		ifFalse: [container notExpandedForm].	centeringOffset _ ((aRectangle height - aForm extent y) // 2).	^aCanvas 		paintImage: aForm 		at: (aRectangle topLeft translateBy: 0 @ centeringOffset).! !!IndentingListItemMorph methodsFor: 'drawing' stamp: 'nk 7/10/2002 11:53'!drawOn: aCanvas	| tRect sRect columnRect columnScanner columnData columnLeft colorToUse |	tRect := self toggleRectangle.	sRect := bounds withLeft: tRect right + 4.	self drawToggleOn: aCanvas in: tRect.	colorToUse _ complexContents preferredColor ifNil: [color].	(container columns isNil or: [(contents asString indexOf: Character tab) = 0]) ifTrue: [		aCanvas drawString: contents asString in: sRect font: self fontToUse color: colorToUse.	] ifFalse: [		columnLeft _ sRect left.		columnScanner _ ReadStream on: contents asString.		container columns do: [ :width |			columnRect _ columnLeft @ sRect top extent: width @ sRect height.			columnData _ columnScanner upTo: Character tab.			columnData isEmpty ifFalse: [				aCanvas drawString: columnData in: columnRect font: self fontToUse color: colorToUse.			].			columnLeft _ columnRect right + 5.		].	]! !!SimpleHierarchicalListMorph methodsFor: 'as yet unclassified' stamp: 'ar 9/7/2002 19:33'!selectionHighlightColor: aColor	^self setProperty: #selectionHighlightColor toValue: aColor! !!SimpleHierarchicalListMorph methodsFor: 'nil' stamp: 'ar 9/7/2002 19:33'!selectionHighlightColor	^self valueOfProperty: #selectionHighlightColor ifAbsent:[color blacker]! !!SimpleHierarchicalListMorph methodsFor: 'initialization' stamp: 'ar 9/12/2002 17:58'!expandFirst	scroller submorphs first toggleExpandedState.	self adjustSubmorphPositions.! !!SimpleHierarchicalListMorph methodsFor: 'drawing' stamp: 'ar 9/7/2002 19:33'!drawOn: aCanvas	super drawOn: aCanvas.	selectedMorph ifNotNil:		[aCanvas fillRectangle:			(((scroller transformFrom: self) invertBoundsRect: selectedMorph bounds)						intersect: scroller bounds)				color: self selectionHighlightColor]! !!SimpleHierarchicalListMorph methodsFor: 'dropping/grabbing' stamp: 'ar 10/11/2002 01:54'!startDrag: evt	| ddm itemMorph |	self dragEnabled ifTrue:[		itemMorph _ scroller submorphs 			detect:[:any| any highlightedForMouseDown] 			ifNone:[nil]].	(itemMorph isNil or:[evt hand hasSubmorphs]) ifTrue: [^self].	itemMorph highlightForMouseDown: false.	ddm := self model dragItemMorph: itemMorph from: self.	evt hand grabMorph: ddm.	ddm position: evt hand bounds center.	evt hand releaseMouseFocus: self.! !!ListItemWrapper methodsFor: 'as yet unclassified' stamp: 'nk 7/10/2002 10:00'!icon	^self class defaultIcon! !!ListItemWrapper methodsFor: 'as yet unclassified' stamp: 'nk 7/10/2002 10:03'!iconSize	^self class iconSize! !!ListItemWrapper class methodsFor: 'as yet unclassified' stamp: 'nk 7/10/2002 10:01'!defaultIcon	"Copy of ModuleWrapperWithIcon moduleIcon"	^((ColorForm	extent: 11@11	depth: 2	fromArray: #( 0 356864000 356864000 356864000 356864000 0 356864000 356864000 356864000 356864000 0)	offset: 0@0)	colorsFromArray: #(#(0.0 0.0 0.0) #(0.0 1.0 1.0) #( ) #(1.0 1.0 1.0)  ))! !!ListItemWrapper class methodsFor: 'as yet unclassified' stamp: 'nk 7/10/2002 10:03'!iconSize	^11@11! !ModuleWrapperWithIcon initialize!